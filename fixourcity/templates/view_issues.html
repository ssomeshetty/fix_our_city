<!-- templates/view_issues.html -->
{% extends 'base.html' %}

{% block title %}View Issues{% endblock %}

{% block content %}
<div class="card">
    <h2 class="card-title">Issues Overview</h2>
    <div class="tabs" style="margin-bottom: 1.5rem;">
        <button class="btn" onclick="showTab('new')">New Issues</button>
        <button class="btn" onclick="showTab('pending')">Pending Issues</button>
        <button class="btn" onclick="showTab('completed')">Completed Issues</button>
    </div>

    <div id="new-issues" class="tab-content">
        <div class="grid">
            {% for issue in new_issues %}
                <div class="card">
                    <h3>{{ issue.title }}</h3>
                    <p>{{ issue.description|truncatewords:30 }}</p>
                    <p>Location: {{ issue.location }}</p>
                    <p>Upvotes: {{ issue.upvotes_count }}</p>
                    <a href="{% url 'issue_detail' issue.id %}" class="btn btn-primary">View Details</a>
                </div>
            {% empty %}
                <p>No new issues.</p>
            {% endfor %}
        </div>
    </div>

    <div id="pending-issues" class="tab-content" style="display: none;">
        <!-- Similar structure for pending issues -->
    </div>

    <div id="completed-issues" class="tab-content" style="display: none;">
        <!-- Similar structure for completed issues -->
    </div>
</div>

<script>
function showTab(tabName) {
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.style.display = 'none';
    });
    document.getElementById(tabName + '-issues').style.display = 'block';
}
</script>

{% endblock %}
